
1、串口
首先用stm32cube配置好，然后测试HAL_UART_Transmit(&huart1,&ch,1,0xffff)可用，表明串口通信ok；
加入syscalls.c
然后把下面的代码复制到usart.c中
#ifdef __GNUC__
/* With GCC, small printf (option LD Linker->Libraries->Small printf
   set to 'Yes') calls __io_putchar() */
#define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
#else
#define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
#endif /* __GNUC__ */
PUTCHAR_PROTOTYPE
{
  /* Place your implementation of fputc here */
  /* e.g. write a character to the USART1 and Loop until the end of transmission */
  HAL_UART_Transmit(&huart1, (uint8_t *)&ch, 1, 0xFFFF);

  return ch;
}
// __attribute__((weak)) int _write(int file, char *ptr, int len)
// {
// 	int DataIdx;

// 	for (DataIdx = 0; DataIdx < len; DataIdx++)
// 	{
// 		__io_putchar(*ptr++);
// 	}
// 	return len;
// }

此时，系统编译提示
src\main.c: In function 'main':
src\main.c:105:5: warning: implicit declaration of function 'printf' [-Wimplicit-function-declaration]
     printf("f446test\n");
     ^~~~~~
src\main.c:105:5: warning: incompatible implicit declaration of built-in function 'printf'
Compiling .pio\build\genericSTM32F446RE\src\usart.o
src\main.c:105:5: note: include '<stdio.h>' or provide a declaration of 'printf'
但是能用

